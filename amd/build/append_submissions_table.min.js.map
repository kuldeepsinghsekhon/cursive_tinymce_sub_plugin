{"version":3,"file":"append_submissions_table.min.js","sources":["../src/append_submissions_table.js"],"sourcesContent":["/**\n * @module     tiny_cursive/plugin\n * @category TinyMCE Editor\n * @copyright  CTI <info@cursivetechnology.com>\n * @author kuldeep singh <mca.kuldeep.sekhon@gmail.com>\n */\n\ndefine([\"jquery\", \"core/ajax\", \"core/str\",\"core/templates\"], function (\n    $,\n    AJAX,\n    str,\n    templates\n  ) {\n    var usersTable = {\n      init: function (score_setting,showcomment) {\n        str\n          .get_strings([\n            { key: \"confidence_threshold\", component: \"tiny_cursive\" },\n          ]).done(function () {\n            usersTable.appendTable(score_setting,showcomment);\n          });\n      },\n      appendTable: function(score_setting){\n        let sub_url= window.location.href;\n        let parm = new URL(sub_url);\n        let h_tr=$('thead').find('tr').get()[0];\n        $(h_tr).find('th').eq(3).after('<th>TypeID</th><th>Stats</th>');\n        $('tbody').find( \"tr\" ).get().forEach(function(tr) {\n          let td_user=$(tr).find(\"td\").get()[0];\n         let userid=$(td_user).find(\"input[type='checkbox']\").get()[0].value;\n          let cmid=parm.searchParams.get('id');\n          var chart=\"fa fa-area-chart popup_item\";\n          var st=\"font-size:24px;color:black;border:none\";\n          let thunder_icon='<td><button  data-id='+userid+' class=\"'+chart+'\" style=\"'+st+'\"></button></td>';\n          $(tr).find('td').eq(3).after(thunder_icon);\n          let args={id: userid,modulename:\"assign\",cmid:cmid} ;\n          let methodname='cursive_user_list_submission_stats';\n          let com=AJAX.call([{ methodname ,args }]);\n          try {\n          com[0].done(function (json) {\n            var data = JSON.parse(json);\n          var score=data.score;\n         var icon='fa fa-circle-o';\n         var color='font-size:24px;color:black';\n          if(score>=score_setting){\n              icon='fa fa-check-circle typeid';\n              color='font-size:24px;color:green';\n          }else if(score<score_setting){\n              icon='fa fa-question-circle typeid';\n              color='font-size:24px;color:#A9A9A9';\n          }else{\n              icon='fa fa-circle-o typeid';\n              color='font-size:24px;color:black';\n            }\n          let close_icon='<td><button  data-id='+userid+' class=\" '+icon+' \" style=\"border:none; '+color+';\"></button></td>';\n          $(tr).find('td').eq(3).after(close_icon);\n            var context = {\n              tabledata: data,\n              page: score_setting,\n            };\n            templates\n              .render(\"tiny_cursive/pop_modal\", context)\n              .then(function (html) {\n                $(\"body\").append(html);\n              }).catch(e=>window.console.log(e));\n          });\n        } catch (error) {\n            window.console.log(error);\n          }\n          $(\".popup_item\").on('click',function () {\n            $(\".modal\").hide();\n            let mid =$(this).data('id');\n          $(\"#\"+mid).show();\n          });\n          $(\".typeid\").on('click',function () {\n            $(\".modal\").hide();\n            let mid =$(this).data('id');\n          $(\"#typeid\"+mid).show();\n          });\n          $(window).on('click',function (e) {\n            if(e.target.id=='modal-close'+userid){\n              $(\"#\"+userid).hide();\n            }\n          });\n          return com.usercomment;\n        });\n      },\n    };\n    return usersTable;\n  });"],"names":["define","$","AJAX","str","templates","usersTable","init","score_setting","showcomment","get_strings","key","component","done","appendTable","sub_url","window","location","href","parm","URL","h_tr","find","get","eq","after","forEach","tr","td_user","userid","value","cmid","searchParams","thunder_icon","args","id","modulename","com","call","methodname","json","data","JSON","parse","score","icon","color","close_icon","context","tabledata","page","render","then","html","append","catch","e","console","log","error","on","hide","mid","this","show","target","usercomment"],"mappings":"AAOAA,+CAAO,CAAC,SAAU,YAAa,WAAW,mBAAmB,SACzDC,EACAC,KACAC,IACAC,eAEIC,WAAa,CACfC,KAAM,SAAUC,cAAcC,aAC5BL,IACGM,YAAY,CACX,CAAEC,IAAK,uBAAwBC,UAAW,kBACzCC,MAAK,WACNP,WAAWQ,YAAYN,cAAcC,iBAG3CK,YAAa,SAASN,mBAChBO,QAASC,OAAOC,SAASC,KACzBC,KAAO,IAAIC,IAAIL,SACfM,KAAKnB,EAAE,SAASoB,KAAK,MAAMC,MAAM,GACrCrB,EAAEmB,MAAMC,KAAK,MAAME,GAAG,GAAGC,MAAM,iCAC/BvB,EAAE,SAASoB,KAAM,MAAOC,MAAMG,SAAQ,SAASC,QACzCC,QAAQ1B,EAAEyB,IAAIL,KAAK,MAAMC,MAAM,GAChCM,OAAO3B,EAAE0B,SAASN,KAAK,0BAA0BC,MAAM,GAAGO,MACzDC,KAAKZ,KAAKa,aAAaT,IAAI,UAG3BU,aAAa,wBAAwBJ,OAAxB,qGACjB3B,EAAEyB,IAAIL,KAAK,MAAME,GAAG,GAAGC,MAAMQ,kBACzBC,KAAK,CAACC,GAAIN,OAAOO,WAAW,SAASL,KAAKA,MAE1CM,IAAIlC,KAAKmC,KAAK,CAAC,CAAEC,WADN,qCACkBL,KAAAA,YAEjCG,IAAI,GAAGxB,MAAK,SAAU2B,UAChBC,KAAOC,KAAKC,MAAMH,MACpBI,MAAMH,KAAKG,MACZC,KAAK,iBACLC,MAAM,6BACNF,OAAOpC,eACNqC,KAAK,4BACLC,MAAM,8BACDF,MAAMpC,eACXqC,KAAK,+BACLC,MAAM,iCAEND,KAAK,wBACLC,MAAM,kCAENC,WAAW,wBAAwBlB,OAAO,YAAYgB,KAAK,0BAA0BC,MAAM,oBAC/F5C,EAAEyB,IAAIL,KAAK,MAAME,GAAG,GAAGC,MAAMsB,gBACvBC,QAAU,CACZC,UAAWR,KACXS,KAAM1C,eAERH,UACG8C,OAAO,yBAA0BH,SACjCI,MAAK,SAAUC,MACdnD,EAAE,QAAQoD,OAAOD,SAChBE,OAAMC,GAAGxC,OAAOyC,QAAQC,IAAIF,QAEnC,MAAOG,OACL3C,OAAOyC,QAAQC,IAAIC,cAErBzD,EAAE,eAAe0D,GAAG,SAAQ,WAC1B1D,EAAE,UAAU2D,WACRC,IAAK5D,EAAE6D,MAAMtB,KAAK,MACxBvC,EAAE,IAAI4D,KAAKE,UAEX9D,EAAE,WAAW0D,GAAG,SAAQ,WACtB1D,EAAE,UAAU2D,WACRC,IAAK5D,EAAE6D,MAAMtB,KAAK,MACxBvC,EAAE,UAAU4D,KAAKE,UAEjB9D,EAAEc,QAAQ4C,GAAG,SAAQ,SAAUJ,GAC1BA,EAAES,OAAO9B,IAAI,cAAcN,QAC5B3B,EAAE,IAAI2B,QAAQgC,UAGXxB,IAAI6B,wBAIV5D"}